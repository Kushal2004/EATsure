<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Food Categories with Filters</title>
  <!-- Bootstrap CSS -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      padding: 20px;
    }
    .btn-primary {
      background-color: rgb(72, 61, 182) !important; /* Custom Primary Button Color */
      border-color: rgb(72, 61, 182) !important; /* Custom Border Color */
    }

    .btn-primary:hover {
      background-color: rgba(72, 61, 182, 0.8) !important; /* Darker shade on hover */
      border-color: rgb(72, 61, 182) !important; /* Maintain border color */
    }
    .alert-primary {
      background-color: rgb(72, 61, 182) !important;
      border-color: rgb(72, 61, 182) !important;
    }
    
    .list-group-item.active {
      background-color: rgb(72, 61, 182) !important;
      border-color: rgb(72, 61, 182) !important;
    }
    
    .dropdown-menu {
      background-color: rgb(72, 61, 182) !important;
    }

    .dropdown-item {
      color: white !important;
    }

    .dropdown-item:hover {
      background-color: rgba(72, 61, 182, 0.8) !important;
    }
    .category-container {
      height: 100vh;
      overflow-y: auto;
      padding-right: 15px;
    }
    .food-options {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      overflow-y: auto;
      max-height: 70vh;
    }
    .card {
      cursor: pointer;
      transition: transform 0.2s;
    }
    .card:hover {
      transform: scale(1.05);
    }
    .food-option-card {
      width: 200px;
      margin-bottom: 10px;
    }
    .star-rating {
      color: #f8c04e;
    }
    .filter-bar {
      margin-bottom: 20px;
    }
    .navbar-brand img {
      width: 40px; /* Adjust logo size */
      height: auto;
    }
    *{
        margin: 0;
    }
  </style>
</head>
<body>

  <!-- Include Bootstrap CSS and Font Awesome for Icons -->
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />

<!-- Navigation Bar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light mb-4">
    <a class="navbar-brand" href="#">
        <img src="Eatsure.png" alt="Logo" style="width: 40px; height: auto;"> <!-- Replace with your logo path -->
    </a>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item">
                <input type="text" class="form-control" placeholder="Search" aria-label="Search">
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#"><i class="fas fa-star"></i> NEW</a> <!-- Icon for NEW -->
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#"><i class="fas fa-tags"></i> Offers</a> <!-- Icon for Offers -->
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#"><i class="fas fa-question-circle"></i> Help</a> <!-- Icon for Help -->
            </li>
        </ul>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="sign-in.html"><i class="fas fa-sign-in-alt"></i> Sign In</a> <!-- Icon for Sign In -->
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#"><i class="fas fa-shopping-cart"></i> Cart</a> <!-- Icon for Cart -->
            </li>
        </ul>
    </div>
</nav>

  <div class="container-fluid">
    <div class="row">
      <!-- Left-side Category List -->
      <div class="col-md-3 category-container">
        <div class="list-group" id="categoryContainer">
          <!-- Category cards will be generated here -->
        </div>
      </div>

      <!-- Middle Food Options Display Area -->
      <div class="col-md-9">
        <h1 class="mb-4">Food Items</h1>

        <!-- Filter Bar -->
        <div class="filter-bar mb-4 d-flex ms-2">
          <div class="dropdown">
            <button class="btn btn-outline-primary btn-sm dropdown-toggle" type="button" id="sortDropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Sort By
            </button>
            <div class="dropdown-menu" aria-labelledby="sortDropdown">
              <a class="dropdown-item" href="#" onclick="sortItems('costLowToHigh')">Cost: Low to High</a>
              <a class="dropdown-item" href="#" onclick="sortItems('costHighToLow')">Cost: High to Low</a>
              <a class="dropdown-item" href="#" onclick="sortItems('rating')">Rating</a>
            </div>
          </div>
          <button class="btn btn-outline-secondary btn-sm" onclick="filterByDelivery()">Fast Delivery</button>
          <button class="btn btn-outline-success btn-sm " onclick="filterByRating()">Ratings 4.0+</button>
          <button class="btn btn-outline-info btn-sm" onclick="filterByVeg()">Pure Veg</button>
          <button class="btn btn-outline-warning btn-sm" onclick="filterByOffers()">Offers</button>
          <button class="btn btn-outline-dark btn-sm" onclick="filterByPriceRange(300, 600)">Rs. 300-Rs.600</button>
          <button class="btn btn-outline-dark btn-sm" onclick="filterByPriceRange(0, 300)">Less than Rs. 300</button>
        </div>

        <div id="foodOptionsContainer" class="food-options">
          <p>Select a category to see food items.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap JS, Popper.js, and jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

  <!-- Import the foodData from external file -->
  <script type="module">
    import { foodData } from './foodData.js';
    const categoryContainer = document.getElementById('categoryContainer');
    const foodOptionsContainer = document.getElementById('foodOptionsContainer');
    let currentItems = []; // Store items of the current category for filtering
    let filteredItems = []; // Store filtered items for display

    function loadCategories() {
      // Add "All" category
      const allCategoryBtn = document.createElement('button');
      allCategoryBtn.className = 'list-group-item list-group-item-action';
      allCategoryBtn.innerText = 'All';
      allCategoryBtn.addEventListener('click', () => {
        currentItems = foodData.flatMap(data => data.items); // Combine items from all categories
        filteredItems = currentItems; // Initialize filtered items to current items
        displayFoodItems(filteredItems);
        document.querySelectorAll('.list-group-item').forEach(btn => btn.classList.remove('active'));
        allCategoryBtn.classList.add('active');
      });
      categoryContainer.appendChild(allCategoryBtn);

      // Load other categories
      foodData.forEach((data, index) => {
        const categoryBtn = document.createElement('button');
        categoryBtn.className = 'list-group-item list-group-item-action';
        categoryBtn.innerText = data.category;
        categoryBtn.addEventListener('click', () => {
          currentItems = data.items;
          filteredItems = currentItems; // Initialize filtered items to current items
          displayFoodItems(filteredItems);
          document.querySelectorAll('.list-group-item').forEach(btn => btn.classList.remove('active'));
          categoryBtn.classList.add('active');
        });
        categoryContainer.appendChild(categoryBtn);
      });

      // Select "All" category by default on page load
      allCategoryBtn.click();
    }


    function displayFoodItems(items) {
      foodOptionsContainer.innerHTML = '';
      if (items.length === 0) {
        foodOptionsContainer.innerHTML = '<p>No items available for this category.</p>';
        return;
      }
      items.forEach(item => {
        const itemCard = document.createElement('div');
        itemCard.className = 'card food-option-card';
        const ratingStars = '<span class="star-rating">' + '★'.repeat(Math.floor(item.rating)) + (item.rating % 1 ? '★' : '') + '</span>';
        itemCard.innerHTML = `
          <img src="${item.image}" class="card-img-top" style="height:200px" alt="${item.name}">
          <div class="card-body">
            <h5 class="card-title">${item.name}</h5>
            <p class="card-text">${item.price}</p>
            <p class="card-text">Rating: ${ratingStars}</p>
            <button class="btn btn-primary btn-sm">Add to Cart</button>
          </div>
        `;
        foodOptionsContainer.appendChild(itemCard);
      });
    }

    // Sorting function
    window.sortItems = function(sortType) {
      let sortedItems;
      
      switch (sortType) {
        case 'costLowToHigh':
          sortedItems = [...filteredItems].sort((a, b) => parseInt(a.price.replace('₹', '').replace(',', '')) - parseInt(b.price.replace('₹', '').replace(',', '')));
          break;
        case 'costHighToLow':
          sortedItems = [...filteredItems].sort((a, b) => parseInt(b.price.replace('₹', '').replace(',', '')) - parseInt(a.price.replace('₹', '').replace(',', '')));
          break;
        case 'rating':
          sortedItems = [...filteredItems].sort((a, b) => b.rating - a.rating);
          break;
        default:
          sortedItems = [...filteredItems]; // If no sort type is selected, keep the current order
          break;
      }
      displayFoodItems(sortedItems);
    }

    // Filtering functions
    window.filterByDelivery = function() {
      filteredItems = filteredItems.filter(item => item.delivery === true);
      displayFoodItems(filteredItems);
    }

    window.filterByRating = function() {
      filteredItems = filteredItems.filter(item => item.rating >= 4);
      displayFoodItems(filteredItems);
    }

    window.filterByVeg = function() {
      filteredItems = filteredItems.filter(item => item.isVeg === true);
      displayFoodItems(filteredItems);
    }

    window.filterByOffers = function() {
      filteredItems = filteredItems.filter(item => item.hasOffer === true);
      displayFoodItems(filteredItems);
    }

    window.filterByPriceRange = function(min, max) {
      filteredItems = filteredItems.filter(item => {
        const priceValue = parseInt(item.price.replace('₹', '').replace(',', ''));
        return priceValue >= min && priceValue <= max;
      });
      displayFoodItems(filteredItems);
    }

    // Load categories on page load
    loadCategories();
  </script>
</body>
</html>
